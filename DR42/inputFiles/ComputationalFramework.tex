%%% A Computational Framework for Environment-Aware Robotic Manipulation
%%% Planning

\subsubsection{A Computational Framework for Environment-Aware Robotic Manipulation Planning}
\label{sec:ComputationalFramework}


Moving beyond with respect to what we committed to investigate in Tasks 4.2 and 4.3, we introduce, in this section, a computational framework for direct trajectory optimization of general manipulation systems without \textsl{a-priori} specified contact sequences, possibly exploiting \emph{environmental constraints} as a tool to accomplish a task.

 Originally, we planned to approach the problem of robust grasping by dividing it into three main stages: (i) move from hand pre-shape to first object contact (Task 4.1), (ii) perform an incipient grasp and assess the first-order properties of the surface of the object, possibly changing candidate contact locations so that the quality of the incipient grasp is maximized (Task 4.2), and (iii) perform the actual grasp acquisition by optimizing the distribution of the applied contact forces (Task 4.3).

 In this section, we report on our efforts to devise a framework to be employed not only for grasp planning, but also for manipulation planning, that should be able to merge all three previous phases in a systematic and coherent way. The user should be focused on providing high-level objectives, e.g. ``move object A from pose 1 to pose 2 in a given amount of time'', and the framework should be able to provide a manipulation plan that should take care of all the rest, e.g. should specify low-level actions and their correct sequence for the manipulation system at hand (single-arm configuration, dual-arm configuration),  defining the whole contact sequence (where and when to make and to break contacts), should provide trajectories consistent with the dynamics of the manipulation system, unilateral contacts, friction constraints and actuation limits.

As reported in a detailed discussion in our work~\cite{Gabiccini:RSS:2015}, related work to which we compare ours indeed include those using: (i) \emph{traditional grasp planners}, such as~\cite{Diankov:PHDTHESIS:2010} and~\cite{Miller:GRASPIT:2004}; (ii) \emph{general purpose planning algorithms}, such as~\cite{Koga:ICRA:1994} and~\cite{Cohen:RSS:2014}; (iii) \emph{machine learning approaches}, as~\cite{Levine:NIPS:2014} and~\cite{Levine:PREPRINT:2014}; (iv) \emph{optimization-based trajectory planners}, such as~\cite{Mordatch:ACMSCA:2012}, \cite{Mordatch:RSS:2014}, and~\cite{Posa:IJRR:2014}. In particular, with respect to~\cite{Posa:IJRR:2014}, which is the closest to ours, we can affirm that, besides a much more efficient computational pipeline, by explicitly instantiating environmental contact forces, we fabricate a strategy such that, if the task may be more efficiently and/or more robustly performed with the aid of constraints provided by the environment, the proposed approach can devise manipulation strategies that cleverly and opportunistically exploit environmental constraints.

 Moreover, in our work~\cite{Gabiccini:RSS:2015}, two approaches are presented to model the dynamics of systems with intermittent contacts: the first one, in which continuous contact reaction forces are generated  by nonlinear virtual springs, is convenient to tackle scenarios where we try to avoid \emph{sliding} contacts; the second one, which is based on a velocity-based time stepping scheme, is suitable in scenarios where \emph{sliding} interaction primitives may lead to convenient interactions among the hand, the manipulandum and the environment.

In both cases, beside system's state and applied torques, object and environment contact forces are included among the free optimization variables, and they are rendered consistent via suitably devised sets of \emph{complementarity} conditions. To maximize computational efficiency, sparsity patterns in the linear algebra expressions generated during the solution of the optimization problem are exploited, and Algorithmic Differentiation (also known as Automatic Differentiation) is leveraged to calculate derivatives. These aspects appear completely unexplored in the literature of high-level planning for systems with intermittent contacts.

The approach is evaluated in three simulated planar manipulation tasks: (i) moving a circular object from an initial pose to a final pose in the workspace with two independent fingers, (ii) rotating a capsule-shaped object with an underactuated two-fingered gripper, and (iii) rotating a circular object in hand with three independent fingers. Tasks (i) and (ii) show that our algorithm quickly converges to locally optimal solutions that opportunistically exploit environmental constraints. Task (iii) demonstrates that even dexterous fingertip gaits can be obtained as a special solution in the very same framework.

More details on this new approach and on the achieved results can be found in the attached paper~\cite{Gabiccini:RSS:2015} available at this~\href{./attachedPapers/ComputationalFrameworkEnvAwareRobManipPlanning.pdf}{link}. 